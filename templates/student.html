{% extends "formPopup.html" %}
{% block title %}Students{% endblock %}
    {% block formContent %}
        <form action="/student" method="POST">
            First Name <input type="text" name="first_name" required="True" value={{studentData.first_name | replace("None","")}}><br>
            Last Name<input type="text" name="last_name" required="True" value={{studentData.last_name | replace("None","")}}><br>
            Major <select name="major_id"><br>
                    {% for major in majorData %}
                        {% if studentData.major_id == major.id %}
                            <option value={{major.major_id}} selected>{{major.major_name}}</option>
                        {% else %}
                            <option value={{major.major_id}}>{{major.major_name}}</option>
                        {% endif %}
                    {% endfor %}
                    </select><br>
            Email <input type="text" name="email_address" required="True" value={{studentData.email_address | replace("None","")}}><br>
            {% if not studentData.first_name %}
                <input type="submit" name="send" value="Add Student">
            {% else %}
                <input type="submit" name="send" value="Update Student">
                <input type="submit" name="send" value="Delete Student">
            {% endif %}
            <br>
        </form>
    {% endblock %}
{% block pagebody %}
    <div class="container">
        <table id="studentTable" data-classes="table table-hover table-condensed" data-toggle="table" data-sort-name="last_name" data-sort-order="desc">
            <thead>
                <tr>
                    <th data-field="student_id" data-sortable="true">Student ID</th>
                    <th data-field="first_name" data-sortable="true">First Name</th>
                    <th data-field="last_name" data-sortable="true">Last Name</th>
                    <th data-field="email_address" data-sortable="true">Email Address</th>
                    <th data-field="major" data-sortable="true">Major</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                    <tr>
                        <td>{{student.student_id}}</td>
                        <td>{{student.first_name}}</td>
                        <td>{{student.last_name}}</td>
                        <td>{{student.email_address}}</td>
                        <td>{{student.majors.major_name}}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <a class="trigger_popup_fricc">Add New Student</a>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#studentTable').DataTable();
        } );
    </script>
{% endblock %}